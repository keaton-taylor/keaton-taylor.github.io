#!/bin/sh
# Bump ManaSell version before every push, then run the push (so the bump commit is included).

cd "$(git rev-parse --show-toplevel)" || exit 1

NEW_VERSION=$(node scripts/bump-manasell-version.js 2>/dev/null)
if [ -n "$NEW_VERSION" ] && ! git diff --quiet manasell.html 2>/dev/null; then
  git add manasell.html
  git commit -m "Bump ManaSell version to ${NEW_VERSION}"
fi

exec git push "$@"
